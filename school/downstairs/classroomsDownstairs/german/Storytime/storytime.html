<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>M√§rchen raten</title>

    <style>
      body {
        position: relative;
        margin: 0;
        height: 100vh;
        font-family: Grundschrift, sans-serif;
        display: flex;
        flex-wrap: wrap;
      }
      img {
        position: absolute;
        top: 0;
        left: 0;
        margin: 0 auto;
        width: 100%;
        height: 100%;
      }

      #backBtn {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 10px 18px;
        font-size: 20px;
        border-radius: 10px;
        border: 3px solid white;
        background: rgba(0, 0, 0, 0.4);
        color: white;
        cursor: pointer;
        z-index: 1000;
      }

      #story {
        position: absolute;
        top: 20%;
        left: 15%;
        width: 31%;
        font-size: 1.4rem;
        line-height: 1.8;
        text-align: justify;
        height: 55%;
        overflow: scroll;
      }
      #right {
        position: absolute;
        top: 30%;
        left: 53%;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 30%;
      }
      input {
        font-size: 1.3rem;

        width: fit-content;
        border-radius: 10px;
        border: 2px solid #020202;
        text-align: center;
      }

      button {
        margin-top: 20px;
        font-size: 1.3rem;
        padding: 12px 30px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        background-color: transparent;
      }

      button:hover {
        background: #7cb342;
      }

      canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 2000;
      }
    </style>
  </head>

  <body>
    <h1>üìñ Welches M√§rchen ist das?</h1>
    <button id="backBtn">‚Üê Zur√ºck</button>
    <img
      src="../../../../../pictures/M√§rchenbuch.jpeg"
      alt="Illustration eines M√§rchenbuchs"
    />

    <div id="story"></div>

    <div id="right">
      <input id="answer" type="text" placeholder="Wie hei√üt das M√§rchen?" />
      <button id="checkBtn">‚úÖ</button>
    </div>

    <canvas id="confetti"></canvas>

    <script>
      const tales = [
        {
          name: "Die goldene Gans",
          text: "Ein armer Junge findet eine Gans mit goldenen Federn. Er nimmt sie mit nach Hause. Wer die Gans ber√ºhrt, bleibt daran kleben. Bald kleben viele Menschen an der Gans. Alle lachen √ºber die lustige Parade. Am Ende heiratet der Junge eine Prinzessin. Er wird reich und alle sind froh.",
        },
        {
          name: "Der Froschk√∂nig",
          text: "Eine Prinzessin verliert ihre goldene Kugel in einem Brunnen. Ein Frosch holt sie zur√ºck. Er will daf√ºr ihr Freund sein. Die Prinzessin ist zuerst b√∂se, aber sie h√§lt ihr Versprechen. Sie k√ºsst den Frosch, und er wird ein Prinz. Die Prinzessin und der Prinz sind gl√ºcklich. Alle feiern ihre Freundschaft.",
        },
        {
          name: "Hans im Gl√ºck",
          text: "Hans bekommt Gold f√ºr seine Arbeit. Auf dem Heimweg tauscht er es gegen ein Pferd, dann gegen eine Kuh und ein Schwein. Am Ende hat er nichts mehr. Aber Hans ist gl√ºcklich. Er merkt, dass Gl√ºck nicht vom Besitz kommt. Auf dem Heimweg singt und tanzt er. Er freut sich √ºber sein freies Leben.",
        },
        {
          name: "K√∂nig Drosselbart",
          text: "Eine stolze Prinzessin verspottet viele Freier. Ein armer Mann heiratet sie. Anfangs ist sie ungl√ºcklich. Dann lernt sie, dass Freundlichkeit wichtig ist. Der Mann ist K√∂nig Drosselbart. Sie regieren gl√ºcklich zusammen. Alle im Volk freuen sich.",
        },
        {
          name: "Frau Holle",
          text: "Ein M√§dchen f√§llt in einen Brunnen und kommt zu Frau Holle. Sie hilft beim Betten sch√ºtteln und Aufr√§umen. Frau Holle belohnt sie mit Gold. Die faule Schwester versucht dasselbe, bekommt aber Pech. Das M√§dchen teilt ihr Gl√ºck. Alle loben ihre Hilfsbereitschaft.",
        },
        {
          name: "Rotk√§ppchen",
          text: "Ein M√§dchen tr√§gt einen roten Umhang und besucht die Gro√ümutter. Unterwegs trifft sie einen b√∂sen Wolf. Der Wolf frisst die Gro√ümutter und verkleidet sich. Ein J√§ger rettet beide. Der Wolf wird besiegt. Rotk√§ppchen lernt, vorsichtig zu sein.",
        },
        {
          name: "Aschenputtel",
          text: "Ein M√§dchen lebt bei einer b√∂sen Stiefmutter. Sie muss alle Hausarbeiten machen. Eine gute Fee hilft ihr auf den Ball zu gehen. Sie verliert den gl√§sernen Schuh. Der Prinz sucht sie im ganzen Land. Aschenputtel heiratet den Prinzen. Alle feiern das gl√ºckliche Ende.",
        },
        {
          name: "Dornr√∂schen",
          text: "Eine Prinzessin wird von einer b√∂sen Fee verflucht. Sie soll sich an einer Spindel stechen. Eine gute Fee mildert den Fluch. Dornr√∂schen schl√§ft hundert Jahre. Ein Prinz k√ºsst sie wach. Sie verlieben sich und sind gl√ºcklich. Alle feiern das Ende des Fluchs.",
        },
        {
          name: "Rumpelstilzchen",
          text: "Ein M√ºller sagt, seine Tochter kann Stroh zu Gold spinnen. Der K√∂nig verlangt es. Ein kleiner Mann hilft, will aber das Kind sp√§ter haben. Die Tochter heiratet den K√∂nig. Um ihr Kind zu behalten, muss sie den Namen des Mannes erraten. Sie erf√§hrt, dass er Rumpelstilzchen hei√üt. Der Mann verschwindet w√ºtend.",
        },
        {
          name: "Die Bremer Stadtmusikanten",
          text: "Vier alte Tiere fliehen von ihren Besitzern. Sie wollen in Bremen Stadtmusikanten werden. Unterwegs finden sie ein R√§uberhaus. Sie stellen sich aufeinander und erschrecken die R√§uber. Die R√§uber fliehen. Die Tiere leben gl√ºcklich zusammen. Sie singen jeden Abend zusammen.",
        },
      ];

      let currentIndex = Math.floor(Math.random() * tales.length);

      function showTale(index) {
        currentIndex = index;
        document.getElementById("story").textContent = tales[index].text;
      }

      function nextRandomTale() {
        if (tales.length <= 1) return;
        let newIndex;
        do {
          newIndex = Math.floor(Math.random() * tales.length);
        } while (newIndex === currentIndex);
        showTale(newIndex);
      }

      showTale(currentIndex);

      function checkAnswer() {
        const answerInput = document.getElementById("answer");
        const userAnswer = answerInput.value.trim().toLowerCase();
        const correctAnswer = tales[currentIndex].name.toLowerCase();

        if (userAnswer === correctAnswer) {
          let points = parseInt(localStorage.getItem("points")) || 0;
          points += 1;
          localStorage.setItem("points", points);
          answerInput.style.borderColor = "green";
          // kurze R√ºckmeldung, dann neue Geschichte zeigen und Eingabe zur√ºcksetzen
          setTimeout(() => {
            nextRandomTale();
            answerInput.value = "";
            answerInput.style.borderColor = "";
          }, 700);
        } else {
          answerInput.style.borderColor = "red";
          setTimeout(() => {
            answerInput.style.borderColor = "";
          }, 700);
        }
      }
      const checkButton = document.getElementById("checkBtn");
      checkButton.onclick = checkAnswer;

      const backButton = document.getElementById("backBtn");
      backButton.onclick = () => {
        window.location.href = "../germanClassroom.html";
      };
    </script>
  </body>
</html>
